<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"><!--
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  --><link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/style-custom.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
  <script src="./js/ma.js"></script>
  <script src="./js/ma-custom.js"></script>
  <title>譲渡案件一覧</title>
</head>
<body>
  <div class="layout">
    <!-- header.header -->
    <header class="header">
      <div class="header__inner header__inner--login">
        <h1 class="header__title"><img class="header__logo" src="./img/logo/logo.svg"></h1>
        <nav class="header__nav"><!--
          <div class="header__global-nav">
            <ul class="header__nav-list header__nav-list--global-nav">
              <li><a href="" class="">サービスについて</a></li>
              <li><a href="" class="">よくあるご質問</a></li>
              <li><a href="" class="">お問い合わせ</a></li>
            </ul>
          </div>
          --><div class="header__user-nav">
            <ul class="header__nav-list header__nav-list--user-nav"><!--
              <li><a href="" class="">会員登録</a></li>
              --><li><button class="btn btn-outline-corp ma-btn-logout">ログアウト</button></li>
            </ul>
          </div>
        </nav>
      </div>
    </header>
    <!-- //header.header -->

    <!-- nav.ma-nav -->
    <nav class="ma-nav">
      <div class="ma-nav__inner">
        <div class="ma-nav__button">
          <button class="btn btn-light ma-btn-nav">マイページTOP</button>
        </div><!--
        <div class="ma-nav__classification">
          <div class="ma-nav__classification-title">売り手メニュー</div>
          <ul class="ma-nav__item-list">
            <li class="ma-nav__item">
              <img src="./img/icon/icon-search.svg">
              <span class="ma-nav__item-category">買い手を探す</span>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">買い手を検索</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">提案中の買い手一覧</a>
            </li>
          </ul>
          <ul class="ma-nav__item-list">
            <li class="ma-nav__item">
              <img src="./img/icon/icon-building.svg">
              <span class="ma-nav__item-category">譲渡案件管理</span>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">譲渡案件を登録</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">登録済の譲渡案件一覧</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">交渉中の譲渡案件一覧</a>
            </li>
          </ul>
        </div>
        --><div class="ma-nav__classification"><!--
          <div class="ma-nav__classification-title">買い手メニュー</div>
          --><ul class="ma-nav__item-list">
            <li class="ma-nav__item">
              <img src="./img/icon/icon-search.svg">
              <span class="ma-nav__item-category">譲渡案件を探す</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">新着案件</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">譲渡案件を検索</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">交渉中の譲渡案件一覧</a>
            </li>
          </ul>
          <ul class="ma-nav__item-list">
            <li class="ma-nav__item">
              <img src="./img/icon/icon-building.svg">
              <span class="ma-nav__item-category">買収ニーズ管理</span>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">買収ニーズを登録</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">登録済の買収ニーズ一覧</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text">交渉中の買収ニーズ一覧</a>
            </li>
          </ul>
        </div><!--
        <div class="ma-nav__classification">
          <div class="ma-nav__classification-title">買い手メニュー</div>
          <ul class="ma-nav__item-list">
            <li class="ma-nav__item">
              <img src="./img/icon/icon-search.svg">
              <span class="ma-nav__item-category ma-nav__item-category--nopay">譲渡案件を探す</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text ma-nav__item-category--nopay">新着案件</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text ma-nav__item-category--nopay">譲渡案件を検索</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text ma-nav__item-category--nopay">交渉中の譲渡案件一覧</a>
            </li>
          </ul>
          <ul class="ma-nav__item-list">
            <li class="ma-nav__item">
              <img src="./img/icon/icon-building.svg">
              <span class="ma-nav__item-category ma-nav__item-category--nopay">買収ニーズ管理</span>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text ma-nav__item-text--nopay">買収ニーズを登録</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text ma-nav__item-text--nopay">登録済の買収ニーズ一覧</a>
            </li>
            <li class="ma-nav__item">
              <a href="" class="ma-nav__item-text ma-nav__item-text--nopay">交渉中の買収ニーズ一覧</a>
            </li>
          </ul>
        </div>
        --><div class="ma-nav__classification">
          <ul class="ma-nav__item-list">
            <li class="ma-nav__item ma-nav__item-common">
              <img src="./img/icon/icon-userinfo.svg">
              <a href="" class="ma-nav__item-category">会員情報</a>
            </li>
            <li class="ma-nav__item">
              <img src="./img/icon/icon-plan.svg">
              <a href="" class="ma-nav__item-category">契約プラン</a>
            </li>
          </ul>
        </div>
        <div class="ma-nav__classification">
          <ul class="ma-nav__item-list">
            <li class="ma-nav__item ma-nav__item-common">
              <img src="./img/icon/icon-manual.svg">
              <a href="" class="ma-nav__item-category">ご利用方法</a>
            </li>
            <li class="ma-nav__item ma-nav__item-common">
              <img src="./img/icon/icon-compass.svg">
              <a href="" class="ma-nav__item-category">お役立ち資料</a>
            </li>
            <li class="ma-nav__item ma-nav__item-common">
              <img src="./img/icon/icon-consult.svg">
              <a href="" class="ma-nav__item-category">専門家に相談する</a>
            </li>
            <li class="ma-nav__item ma-nav__item-common">
              <img src="./img/icon/icon-finale.svg">
              <a href="" class="ma-nav__item-category">成約報告</a>
            </li>
            <li class="ma-nav__item ma-nav__item-common">
              <img src="./img/icon/icon-qa.svg">
              <a href="" class="ma-nav__item-category">よくあるご質問</a>
            </li>
            <li class="ma-nav__item ma-nav__item-common">
              <img src="./img/icon/icon-qaform.svg">
              <a href="" class="ma-nav__item-category">お問い合わせ</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- //nav.ma-nav -->

    <main class="main" >
      <div class="main__inner">
        <!-- breadcrumb__nav -->
        <nav class="breadcrumb__nav">
          <ul class="breadcrumb__list">
            <li><a href="">マイページ</a></li>
            <li><a href="">譲渡案件を検索</a></li>
            <li>案件詳細</li>
          </ul>
        </nav>
        <!-- //breadcrumb__nav -->

        <section class="section">
          <div class="section__inner">
            <h2 class="section__title section__title-h2 section__title-h2--ul">譲渡案件一覧</h2>
            <div class="section__content">
              <!-- 検索条件 -->
              <form class="form form--search" action="">
                <dl class="row m-0">
                  <div class="col-md-6 form__item form__item--border form__item--top-border search-form__item">
                    <dt class="form__item-title search-form__item-title search-seller-form__item-title">譲渡形式</dt>
                    <dd class="form__item-input search-form__item-input">
                      <div class="form__item-input--flex-wrap">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                          <label class="form-check-label" for="inlineCheckbox1">株式譲渡</label>
                        </div><div class="form-check">
                          <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option1">
                          <label class="form-check-label" for="inlineCheckbox2">事業譲渡</label>
                        </div>
                      </div>
                  </dd>
                  </div>
                  <div class="col-md-6 form__item form__item--border form__item--top-border search-form__item">
                    <dt class="form__item-title search-form__item-title search-seller-form__item-title">案件掲載者</dt>
                    <dd class="form__item-input search-form__item-input search-seller-form__item-input">
                      <div class="form__item-input--flex-wrap">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                          <label class="form-check-label" for="inlineCheckbox1">オーナー直接</label>
                        </div><div class="form-check">
                          <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option1">
                          <label class="form-check-label" for="inlineCheckbox2">アドバイザー</label>
                        </div>
                      </div>
                  </dd>
                  </div>
                  <div class="col-12 form__item form__item--border search-form__item">
                    <dt class="form__item-title search-form__item-title search-seller-form__item-title">業種</dt>
                    <dd class="form__item-input search-form__item-input search-seller-form__item-input" style="font-size: 1.4rem;">
                      <ul id="form-sector" class="check-list check-list--wrap mb-3" style="display: none;">
                      </ul>
                      <a class="btn selectSector ma-btn-modal search-form__modal">＋選択してください</a>
                    </dd>
                  </div>
                  <div class="col-12 form__item form__item--border search-form__item">
                    <dt class="form__item-title search-form__item-title search-seller-form__item-title">地域</dt>
                    <dd class="form__item-input search-form__item-input search-seller-form__item-input">
                      <select class="form-select w-25 form-area">
                        <option selected>＋選択してください</option>
                      </select>
                    </dd>
                  </div>
                  <div class="col-md-6 form__item form__item--border search-form__item">
                    <dt class="form__item-title search-form__item-title search-seller-form__item-title">譲渡希望価格</dt>
                    <dd class="form__item-input search-form__item-input">
                      <select class="form-select">
                        <option selected>＋選択してください</option>
                      </select>
                    </dd>
                  </div>
                  <div class="col-md-6 form__item form__item--border search-form__item">
                    <dt class="form__item-title search-form__item-title search-seller-form__item-title">売上高</dt>
                    <dd class="form__item-input search-form__item-input search-seller-form__item-input">
                      <select class="form-select">
                        <option selected>＋選択してください</option>
                      </select>
                    </dd>
                  </div>
                  <div class="col-12 form__item form__item--border search-form__item">
                    <dt class="form__item-title search-form__item-title search-seller-form__item-title">新着案件のみ表示</dt>
                    <dd class="form__item-input search-form__item-input search-seller-form__item-input">
                      <div class="form__item-input--flex-wrap">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                          <label class="form-check-label" for="inlineCheckbox1"></label>
                        </div>
                      </div>
                  </dd>
                  </div>
                </dl>
                <div class="form__action form__action--center form__action-search">
                  <button class="btn btn-corp ma-btn-search">検索</button>
                </div>

              </form>
              <!-- //検索条件 -->
            </div>

            <!-- ソート順/ページネーション -->
            <div class="section__content mt-3">
              <div class="d-flex align-items-center">
                <div class="">
                  <select class="form-select w-100">
                    <option selected>公開日　降順</option>
                  </select>
                </div>
                <!-- nav.pagination -->
                <div class="me-0 ms-auto">
                  <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-end">
                      <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                        </a>
                      </li>
                      <li class="page-item"><a class="page-link" href="#">1</a></li>
                      <li class="page-item active"><a class="page-link" href="#">2</a></li>
                      <li class="page-item"><a class="page-link" href="#">3</a></li>
                      <li class="page-item"><a class="page-link" href="#">4</a></li>
                      <li class="page-item"><a class="page-link" href="#">5</a></li>
                      <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                        </a>
                      </li>
                    </ul>
                  </nav>
                </div>
                <!-- //nav.pagination -->
              </div>
            </div>

            <div class="section__content mt-3">
              <div class="search-result search-seller-result">
                <div class="search-seller-result__header">
                  <h3 class="search-seller-result__title">タイトル</h3>
                  <div class="search-seller-result__purchase-info">
                    <ul class="check-list">
                      <li class="check-list__item check-list__item--fa">アドバイザー</li>
                      <li class="check-list__item">株式譲渡</li>
                    </ul>
                  </div>
                </div>
                <div class="search-seller-result__date">更新日：0000/01/01</div>
                <div class="search-seller-result__detail">
                  <dl class="row m-0">
                    <div class="col-md-6 search-seller-result__item">
                      <dt class="search-seller-result__item-title">業種</dt>
                      <dd class="search-seller-result__item-value">
                        <ul class="check-list check-list--wrap">
                          <li class="check-list__item">EC</li>
                          <li class="check-list__item">アパレル</li>
                          <li class="check-list__item">雑貨</li>
                        </ul>
                      </dd>
                    </div>
                    <div class="col-md-6 search-seller-result__item">
                      <dt class="search-seller-result__item-title">地域</dt>
                      <dd class="search-seller-result__item-value">
                        <ul class="check-list check-list--wrap">
                          <li class="check-list__item">関東地方</li>
                        </ul>
                      </dd>
                    </div>
                    <div class="col-md-6 search-seller-result__item">
                      <dt class="search-seller-result__item-title">譲渡希望価格</dt>
                      <dd class="search-seller-result__item-value search-seller-result-price">5000万～1億</dd>
                    </div>
                    <div class="col-md-6 search-seller-result__item">
                      <dt class="search-seller-result__item-title">売上高</dt>
                      <dd class="search-seller-result__item-value search-seller-result-sales">5000万～1億</dd>
                    </div>
                    <div class="col-12 search-seller-result__item">
                      <dt class="search-seller-result__item-title">アピールポイント</dt>
                      <dd class="search-seller-result__item-value search-seller-result-appeal">
                        <ul class="check-list check-list--wrap">
                          <li class="check-list__item">営業黒字</li>
                          <li class="check-list__item">純資産プラス</li>
                          <li class="check-list__item">実質無借金</li>
                          <li class="check-list__item">短期回収可能</li>
                          <li class="check-list__item">業績上昇中</li>
                          <li class="check-list__item">自走可能</li>
                        </ul>
                      </dd>
                    </div>
                  </dl>
                </div>
              </div>
            </div>

            <!-- ページネーション -->
            <div class="section__content mt-3">
              <!-- nav.pagination -->
              <nav aria-label="Page navigation">
                <ul class="pagination justify-content-end">
                  <li class="page-item disabled">
                    <a class="page-link" href="#" aria-label="Previous">
                      <span aria-hidden="true">&laquo;</span>
                    </a>
                  </li>
                  <li class="page-item"><a class="page-link" href="#">1</a></li>
                  <li class="page-item active"><a class="page-link" href="#">2</a></li>
                  <li class="page-item"><a class="page-link" href="#">3</a></li>
                  <li class="page-item"><a class="page-link" href="#">4</a></li>
                  <li class="page-item"><a class="page-link" href="#">5</a></li>
                  <li class="page-item">
                    <a class="page-link" href="#" aria-label="Next">
                      <span aria-hidden="true">&raquo;</span>
                    </a>
                  </li>
                </ul>
              </nav>
              <!-- //nav.pagination -->
            </div>

          </div>
        </section>
      </div>
    </main>
    <!-- modal.sector -->
    <div class="modal fade" id="modal-select-sector" tabindex="-1" aria-labelledby="modalSelectSector" aria-hidden="true">
      <div class="modal-dialog modal-dialog-scrollable ma-modal-dialog">
        <div class="modal-content">
          <div class="modal-header" style="background-color: #c8161d">
            <h5 class="modal-title font-size-16" id="modalSelectSector" style="color: white;">業種選択</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <dl id="modal-list">
            </dl>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary ma-modal-btn-back" data-bs-dismiss="modal">閉じる</button>
            <button type="button" class="btn btn-corp ma-modal-btn-fw" id="sector-selected">選択する</button>
          </div>
        </div>
      </div>
    </div>
    <!-- //modal.sector -->

  </div>
</body>
<script>
  var ma = new Ma();
  $(function() {
    // エリア設定
    ma.setOptions('./json/master-area.json', '.form-area');

  /**
   * modal項目選択時に、hidden値を生成する
   */
   createHiddenEl = function(name, value) {
    var el = document.createElement('input');
    el.setAttribute('type', 'hidden');
    el.setAttribute('name', name);
    el.setAttribute('value', value);
    return el;
  }
  /**
   * チェックボックスとラベルのエレメント作成
   */
   createCheckboxDiv = function (element, prefix) {
    var input = document.createElement('input');
    input.classList.add('form-check-input');
    input.id = prefix + element.value;
    input.setAttribute('type', 'checkbox')
    input.setAttribute('value', element.value);

    var label = document.createElement('label');
    label.classList.add('form-check-label');
    label.setAttribute('for', prefix + element.value);
    label.innerHTML = element.name;

    var div = document.createElement('div');
    div.classList.add('form-check');
    div.appendChild(input);
    div.appendChild(label);
    return div;
  }
  /**
   *  業界業種モーダル設定
   */
   fetch('./json/master-section.json')
  .then(function(response){
    return response.json();
  })
  .then(function(data) {
    Array.from(document.querySelectorAll('#modal-list'), function(el, index) {
      data.forEach(element => {
        var divIndustory = createCheckboxDiv(element, 'form-industory');
        var industory = divIndustory.children[0];
        industory.classList.add("checkbox-industory");
        industory.addEventListener('click', function() {
          isChecked = this.checked;
          Array.from(this.parentNode.parentNode.parentNode.children[1].getElementsByClassName('form-check-input'), function(elSectionCheck, index) {
            elSectionCheck.checked = isChecked;
          });
        });
        var fragment = document.createDocumentFragment();
        (element.option).forEach(opel => {
          fragment.appendChild(createCheckboxDiv(opel, 'form-sector'));
        });
        var dt = document.createElement('dt');
        dt.classList.add('ma-modal-dialog__title');
        dt.appendChild(divIndustory);
        var dd = document.createElement('dd');
        dd.classList.add('ma-modal-dialog__input');
        dd.appendChild(fragment);
        var div = document.createElement('div');
        div.classList.add('ma-modal-dialog__item');
        div.appendChild(dt);
        div.appendChild(dd);
        el.appendChild(div);
      });
    });
  });

    /**
     * モーダル関連
     */
     var modalEl = document.getElementById('modal-select-sector');
    document.querySelector('.selectSector').addEventListener('click', function() {
      bootstrap.Modal.getOrCreateInstance(modalEl).show();
    });

    /**
     * 業種を選択するリンク押下時処理
     */
     document.getElementById('sector-selected').addEventListener('click', function() {
      var fragment = document.createDocumentFragment();
      var modalInputTarget = modalEl.querySelectorAll('.ma-modal-dialog__input .form-check-input');
      var isChecked = false;
      Array.from(modalInputTarget, function(el, idx) {
        if (el.checked) {
          var value = el.value;
          var text = el.parentNode.children[1].innerHTML;

          var li = document.createElement('li');
          li.classList.add('check-list__item');
          li.classList.add('check-list__item--search');
          li.innerHTML = text;

          var div = document.createElement('div');
          var selectedLabel = createHiddenEl('sectorLabel', text);
          var selectedValue = createHiddenEl('sectorValue', value);
          fragment.appendChild(li);
          fragment.appendChild(selectedLabel);
          fragment.appendChild(selectedValue);

          isChecked = true;
        }
      });

      var target = document.getElementById('form-sector');
      target.innerHTML = '';
      target.appendChild(fragment);

      if (isChecked) {
        target.style.display ="flex";
      } else {
        target.style.display ="none";
      }

      bootstrap.Modal.getOrCreateInstance(modalEl).hide();
    });
  });

</script>
</html>
