<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><!--
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    --><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet"><!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    --><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/15f01edec0.js" crossorigin="anonymous"></script>
    <title>ログイン</title>
  </head>
  <body>
    <!-- header.sitetop-header -->
    <header class="sitetop-header">
      <div class="sitetop-header__inner">
        <h1 class="sitetop-header__title"><img src="./img/sitetop-logo.png" alt=""></h1><!--
        <nav class="sitetop-header__nav">
          <ul class="sitetop-header__nav-list-left">
            <li class="sitetop-header__nav-item-left"><a class="sitetop-header__nav-anchor" href="">サービスについて</a></li>
            <li class="sitetop-header__nav-item-left"><a class="sitetop-header__nav-anchor" href="">よくあるご質問</a></li>
            <li class="sitetop-header__nav-item-left"><a class="sitetop-header__nav-anchor" href="">お問い合わせ</a></li>
          </ul>
          <ul class="sitetop-header__nav-list-right">
            <li class="sitetop-header__nav-item-right"><a class="sitetop-header__nav-anchor" href="">会員登録</a></li>
            <li class="sitetop-header__nav-item-right"><a class="sitetop-header__nav-button" href="" class="sitetop-header__button">ログイン</a></li>
          </ul>
        </nav>
      --></div>
    </header>
    <!-- //header.sitetop-header -->

    <main class="sitetop-main regist-user">
      <section class="sitetop-main__section--noodd">
        <div class="sitetop-main__section-inner signin__section-inner">
          <h1 class="sitetop-main__section-title">ログイン</h1>
          <div>
            <nav>
              <div class="nav nav-tabs nav-justified" id="nav-tab" role="tablist">
                <a class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">
                  <div class="login-nav__tab" style="display: flex;align-items: center;justify-content: center;">
                    <span style="font-size: 3.0rem; color: #c8161d;"><i class="fas fa-sign-in-alt"></i></span>&nbsp;ログイン
                  </div>
                </a>
                <a class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">
                  <div class="login-nav__tab" style="display: flex;align-items: center;justify-content: center;">
                    <span style="font-size: 3.0rem; color: #c8161d;"><i class="fas fa-unlock-alt"></i></span>&nbsp;パスワード再発行
                  </div>
                </a>
              </div>
            </nav>
            <div class="tab-content signin__tab-content" id="nav-tabContent">
              <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                <div class="signin__content">
                  <div class="signin__content-text">
                    <img src="./img/login-logo.svg" style="max-width: 15rem;">
                  </div>
                  <div class="signin__form">
                    <form>
                      <dl class="signin__item-list">
                        <div class="form-regist__item">
                          <dt class="form-regist__item-title signin__item-title">メールアドレス</dt>
                          <dd class="form-regist__item-input signin__item-input">
                            <input type="text" class="form-control font-size-14 width-45" name="login" id="login_value" placeholder="Email" tabindex="1" value="" data-nlok-ref-guid="ea2db5db-ece1-4f53-d538-6c85635ddaa0">
                          </dd>
                        </div>
                        <div class="form-regist__item">
                          <dt class="form-regist__item-title signin__item-title">パスワード</dt>
                          <dd class="form-regist__item-input signin__item-input">
                            <input type="password" class="form-control font-size-14 width-45" name="password" id="login_password" placeholder="Password" tabindex="1" value="" data-nlok-ref-guid="ea2db5db-ece1-4f53-d538-6c85635ddaa0">
                          </dd>
                        </div>
                      </dl>
                      <button class="w-100 btn btn-lg btn-primary" type="submit" data-nlok-ref-guid="ae5545e4-500a-4bb4-ca22-0df8b4173e63">サインイン</button>
                    </form>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                <div class="signin__content">
                  <div class="signin__content-text">
                    パスワードを再発行します。<br>
                    ご登録頂いたメールアドレスを入力してください。<br>
                    パスワード変更用のURLをお送りいたします。
                  </div>
                  <div class="signin__form">
                    <form>
                      <dl class="signin__item-list">
                        <div class="form-regist__item">
                          <dt class="form-regist__item-title signin__item-title">メールアドレス</dt>
                          <dd class="form-regist__item-input signin__item-input">
                            <input type="text" class="form-control font-size-14 width-45" name="login" id="login_value" placeholder="Email" tabindex="1" value="" data-nlok-ref-guid="ea2db5db-ece1-4f53-d538-6c85635ddaa0">
                          </dd>
                        </div>
                      </dl>
                      <button class="w-100 btn btn-lg btn-primary" type="submit" data-nlok-ref-guid="ae5545e4-500a-4bb4-ca22-0df8b4173e63">送信する</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </body>
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {

      // var forms = document.querySelectorAll('.needs-validation');
      // Array.prototype.slice.call(forms).forEach(function(form) {
      //   form.addEventListener('submit', function(event) {
      //     form.classList.remove('was-validated');
      //     if (!form.checkValidity()) {
      //       event.preventDefault();
      //       event.stopPropagation();
      //     }
      //     form.classList.add('was-validated');
      //   }, false);
      // });

      /**
       * チェックボックスとラベルのエレメント作成
       */
      createCheckboxDiv = function (element, prefix) {
        var input = document.createElement('input');
        input.classList.add('form-check-input');
        input.id = prefix + element.value;
        input.setAttribute('type', 'checkbox')
        input.setAttribute('value', element.value);
        var label = document.createElement('label');
        label.classList.add('form-check-label');
        label.setAttribute('for', prefix + element.value);
        label.innerHTML = element.name;
        var div = document.createElement('div');
        div.classList.add('form-check');
        div.appendChild(input);
        div.appendChild(label);
        return div;
      }

      /**
       * チェックボックス設定
       */
      setCheckbox = function(path, querySelector, prefix) {
        fetch(path)
        .then(function(response){
          return response.json();
        })
        .then(function(data) {
          Array.from(document.querySelectorAll(querySelector), function(el, index) {
            data.forEach(element => {
              el.appendChild(createCheckboxDiv(element, prefix));
            });
          });
        });
      }

      /**
       * オプション設定
       */
      setOptions = function(path, querySelector) {
        fetch(path)
        .then(function(response){
          return response.json();
        })
        .then(function(data) {
          Array.from(document.querySelectorAll(querySelector), function(el, index) {
            data.forEach(element => {
              var opt = document.createElement('option');
              opt.value = element.value;
              opt.text = element.name;
              el.appendChild(opt);
            });
          });
        });
      }

      /**
       *  業界業種モーダル設定
       */
      fetch('./json/master-section.json')
        .then(function(response){
          return response.json();
        })
        .then(function(data) {
          Array.from(document.querySelectorAll('#modal-list'), function(el, index) {
            data.forEach(element => {
              var divIndustory = createCheckboxDiv(element, 'form-industory');
              var industory = divIndustory.children[0];
              industory.classList.add("checkbox-industory");
              industory.addEventListener('click', function() {
                isChecked = this.checked;
                Array.from(this.parentNode.parentNode.parentNode.children[1].getElementsByClassName('form-check-input'), function(elSectionCheck, index) {
                  elSectionCheck.checked = isChecked;
                });
              });
              var fragment = document.createDocumentFragment();
              (element.option).forEach(opel => {
                fragment.appendChild(createCheckboxDiv(opel, 'form-sector'));
              });
              var dt = document.createElement('dt');
              dt.classList.add('ma-modal-dialog__title');
              dt.appendChild(divIndustory);
              var dd = document.createElement('dd');
              dd.classList.add('ma-modal-dialog__input');
              dd.appendChild(fragment);
              var div = document.createElement('div');
              div.classList.add('ma-modal-dialog__item');
              div.appendChild(dt);
              div.appendChild(dd);
              el.appendChild(div);
            });
          });
        });

      // Optionの作成
      setOptions('./json/master-prefecture.json', '.form-prefecture');
      setCheckbox('./json/master-specialty.json', '.consultation-specialty', 'form-consultation-specialty')
      setCheckbox('./json/master-specialty.json', '.specialty', 'form-specialty')

      /**
       * モーダル関連
       */
      var modalEl = document.getElementById('modal-select-sector');
      document.getElementById('selectSector').addEventListener('click', function() {
        bootstrap.Modal.getOrCreateInstance(modalEl).show();
      });

      /**
       * modal項目選択時に、hidden値を生成する
       */
      createHiddenEl = function(name, value) {
        var el = document.createElement('input');
        el.setAttribute('type', 'hidden');
        el.setAttribute('name', name);
        el.setAttribute('value', value);
        return el;
      }

      /**
       * 業種を選択するリンク押下時処理
       */
      document.getElementById('sector-selected').addEventListener('click', function() {
        var fragment = document.createDocumentFragment();
        var modalInputTarget = modalEl.querySelectorAll('.ma-modal-dialog__input .form-check-input');
        Array.from(modalInputTarget, function(el, idx) {
          if (el.checked) {
            var value = el.value;
            var text = el.parentNode.children[1].innerHTML;
            
            var div = document.createElement('div');
            var span = document.createElement('span');
            span.classList.add('form-regist__item-modal-value');
            span.innerHTML = text;
            var selectedLabel = createHiddenEl('sectorLabel', text);
            var selectedValue = createHiddenEl('sectorValue', value);
            div.appendChild(span);
            div.appendChild(selectedLabel);
            div.appendChild(selectedValue);
            fragment.appendChild(div);
          }
        });
      
        var target = document.getElementsByClassName('regist-user__item-input--sectors')[0];
        target.innerHTML = '';
        target.appendChild(fragment);

        bootstrap.Modal.getOrCreateInstance(modalEl).hide();
      });
    });
  </script>
</html>
